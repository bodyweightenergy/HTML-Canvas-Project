<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
    </style>
  </head>
  <body>
    <div><input type="text" size="30"></input></div>
    <canvas id="myCanvas" width="1024" height="728" style="border:1px dotted;float:left"></canvas>
    <script>
        shape_id_list = [0];
        function addID() {
            var prev = shape_id_list.pop();
            shape_id_list.push(prev);
            next = prev + 1;
            shape_id_list.push(next);
            return next;
        }
        var selectorValue = 1;
        function changeSelector(val) {
            switch (val) {
                case 'rect':
                    selectorValue = 1;
                    break;
                case 'tri':
                    selectorValue = 2;
                    break;
                default:
                    selectorValue = -1;
            }
            alert('changeSelector(' + val + ') called')
        }
        function clearCanvas(canvas) {
            var context = canvas.getContext('2d');
            context.clearRect(0, 0, canvas.width, canvas.height);
            alert('Canvas cleared!');
        }
        function writeMessage(canvas, message) {
            var context = canvas.getContext('2d');
            context.clearRect(0, 0, 270, 40);
            context.font = '18pt Calibri';
            context.fillStyle = 'black';
            context.fillText(message, 10, 25);
        }
        function getMousePos(canvas, evt) {
            var rect = canvas.getBoundingClientRect();

            return {
                x: evt.clientX - rect.left,
                y: evt.clientY - rect.top
            };
        }
        function addRect(canvas, xpos, ypos, size) {
            var context = canvas.getContext('2d');
            var width = size;
            context.fillStyle = '#FF7700';
            context.fillRect(xpos, ypos, width, width);
        }
        function addTri(canvas, xpos, ypos, size) {
            var context = canvas.getContext('2d');
            width = size;
            height = width * (0.866);
            context.fillStyle = '#FF0000';
            context.beginPath();
            context.moveTo(xpos - (width / 2), ypos);
            context.lineTo(xpos + width / 2, ypos);
            context.lineTo(xpos, ypos + height);
            context.fill();
        }
        function square(xpos, ypos) {
            this.id = addID();
            this.xpos = xpos;
            this.ypos = ypos;
            this.angle = 0;
            this.getID = getID;
            this.getPos = getPos;
        }
        function triangle(xpos, ypos) {
            this.id = addID();
            this.xpos = xpos;
            this.ypos = ypos;
            this.angle = 0;
            this.getID = getID;
            this.getPos = getPos;
        }
        function getID() {
            return this.id;
        }
        function getPos() {
            return [this.xpos, this.ypos];
        }

        var news = new square(100, 100);
        var newt = new triangle(200, 100);
        alert('shape_id_list = ' + shape_id_list);

        var canvaso = document.getElementById('myCanvas');

        canvaso.addEventListener('mousedown', function (evt) {
            var mousePos = getMousePos(canvaso, evt);
            var message = 'Mouse position: ' + mousePos.x + ',' + mousePos.y;
            writeMessage(canvaso, message);
            if (selectorValue === 1)
                addRect(canvaso, mousePos.x, mousePos.y, 50);
            else if (selectorValue === 2)
                addTri(canvaso, mousePos.x, mousePos.y, 50);
        }, false);
    </script>
      <div>
        <form>
            <input type="button" id="rect-button" onclick="changeSelector('rect')" value="Select Rectangle" />
            <input type="button" id="tri-button" onclick="changeSelector('tri')" value="Select Triangle" />
            <input type="button" id="clear-button" onclick="clearCanvas(canvaso)" value="Clear Canvas" />
        </form>
      </div>
  </body>
</html>